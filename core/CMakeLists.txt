file(GLOB SRC_LIST "*.cpp")
file(GLOB HEADERS "*.h")
set(MESSAGES_PROTOS Consensus.proto)

set(CONSENSUS_PROTO_SUB_DIR "core/proto")
set(CONSENSUS_PROTO_GENERATE_DIR ${CONSENSUS_PROTO_GENERATE_BASE_DIR}/${CONSENSUS_PROTO_SUB_DIR})

include(GenerateSources)
protobuf_generate_cpp(PROTO_SRCS PROTO_HDRS ${MESSAGES_PROTOS} ${PROTO_PATH} "proto" ${CONSENSUS_PROTO_GENERATE_BASE_DIR} ${CONSENSUS_PROTO_GENERATE_DIR})

add_library(${BCOS_CONSENSUS_CORE_TARGET} ${SRC_LIST} ${PROTO_SRCS} ${HEADERS} ${PROTO_HDRS})
target_compile_options(${BCOS_CONSENSUS_CORE_TARGET} PRIVATE -Wno-error -Wno-unused-variable)

target_link_libraries(${BCOS_CONSENSUS_CORE_TARGET} PUBLIC bcos-framework::utilities)